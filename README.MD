# Cursor Server

![screenshot](https://raw.githubusercontent.com/DmitriyHoff/images/master/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202023-11-18%2015-57-53.png)

Real-time приложение

## Описание задачи

- Нарисовать квадрат 600х600px
- При перемещении курсора рисовать точку под ним
- При открытии этой же страницы в дополнительной вкладке/окне отображать кол-во подключенных пользователей
- Все пользователи видят курсоры всех в одном квадрате
- Созхранять логи движения курсора
- ДОП. Логическое удаление главной записи клиента
- ДОП. API для получения истории движения курсором клиента
- ДОП. API для получения всех подключенных клиентов
- ДОП. API для получения всех клиентов

### Системные требования

Для работы приложения требуется:
- Node.js и PostgreSQL или Docker

### Установка

#### Настройка сервера

Для запуска сервера необходимо:
- ~~перейти в папку `server/` и выполнить установку зависмостей коммандой `npm install`~~
- ~~настроить параметры подключения к БД в файле `config/db.config.js`~~
- ~~запустить сервер коммандой `npm run start`~~
- убедиться чтоустановлен Docker, для этого ввести команду `docker -v`
- выполнить комманду `docker-compose up`

#### Настройка клиента

Дла работы клиентской части приложения необходимо:
- открыть новый терминал
- перейти в папку `client/` и выполнить установку зависимостей коммандой `npm install`
- запустить приложение коммандой `npm run dev`

### Описание REST API

API приложения доступны по ссылке:
`http://localhost:3000/api`

#### GET /api/clients

Возвращает всех клиентов в БД. Может принимать параметр `online` с одним из двух значений: `true` или `false`

##### Возможные ответы:

`200` - Список всех пользователей в формате:
```json
[
  {"id":1,"name":"client1"},
  {"id":2,"name":"client2"}
]
```
`400` - Неправильное значение параметра

`500` - Ошибка самого сервера

#### GET /api/logs/{id}

Возвращает все действия клиента с указанным `id`

##### Возможные ответы:

`200` - Список всех действий клиента в формате:
```json
[
  {
    "params":"null",
    "timestamp":"2023-11-18T15:12:22.672Z",
    "type":"Connect"
  },
  {
    "params":"{\"x\":594,\"y\":491}",
    "timestamp":"2023-11-18T15:12:24.950Z",
    "type":"Move"
  }
  {
    "params":"null",
    "timestamp":"2023-11-18T15:12:37.883Z",
    "type":"Disconnect"
  }
]
```
`400` - Неправильное значение параметра

`500` - Ошибка самого сервера
